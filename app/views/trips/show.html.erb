
<%= render 'map' %>

<script type="text/javascript">
  var data = new Object();
  var data1 = null;
  <% @data.each do |route_id, route_hash| %>
    var routeId = <%= route_id %>;
    data[String(routeId)] = new Object();
    <% route_hash.each do |sub_route_id, address_arr| %>
      var subRouteId = <%= sub_route_id %>;
      var subRouteHash = new Object();
      subRouteHash["origin"] = "<%= address_arr.first %>";
      subRouteHash["destination"] = "<%= address_arr.last %>";
      // subRouteHash["departureTime"] = 1391530628316;
      subRouteHash["travelMode"] = google.maps.TravelMode.DRIVING;

      directionsService.route(subRouteHash, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          data1 = response;
        }
      });

    <% end %>
  <% end %>
  directionsDisplay.setDirections(data1);
</script>



