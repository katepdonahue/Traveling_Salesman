<!-- 
<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map-canvas { height: 100% }
  </style>
  <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMHIfEryQsTPokzC1kbPSUs0CFYRcph48&sensor=true">
  </script>
  <script type="text/javascript">
    function initialize() {
      var start = new google.maps.LatLng(<%= @start.latitude %>, <%= @start.longitude %>)
      var end = new google.maps.LatLng(<%= @end.latitude %>, <%= @end.longitude %>)
      var mapOptions = {
        center: start,
        zoom: 15
      };
      var map = new google.maps.Map(document.getElementById("map-canvas"),
          mapOptions);

      var startMarker = new google.maps.Marker({
        position: start,
        map: map,
        title: 'Hello World!'
      });
      var endMarker = new google.maps.Marker({
        position: end,
        map: map,
        title: 'Goodbye World!'
      });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    
  </script>
</head>
<body>
  <div id="map-canvas"/>
</body> -->

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>
<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(<%=raw @hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
</script>